{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nlet spanDays = document.querySelector('.value[data-days]');\nlet spanHours = document.querySelector('.value[data-hours]');\nlet spanMinutes = document.querySelector('.value[data-minutes]');\nlet spanSeconds = document.querySelector('.value[data-seconds]');\n\nlet userSelectedDate;\nstartBtn.disabled = true;\n\nstartBtn.addEventListener('click', event => {\n  if (userSelectedDate && !startBtn.disabled) {\n    input.disabled = true;\n    startBtn.disabled = true;\n\n    iziToast.info({\n      title: 'Timer Started',\n      message: 'Countdown is now running!',\n      position: 'topCenter',\n    });\n\n    startTimer();\n  }\n});\n\n// start timer function\nfunction startTimer() {\n  const timer = setInterval(() => {\n    const now = Date.now();\n    const timeData = convertMs(userSelectedDate - now);\n\n    const allZero = Object.values(timeData).every(value => value === 0);\n    if (allZero) {\n      updateTimerHTML(timeData);\n      clearInterval(timer);\n      input.disabled = false;\n      iziToast.success({\n        title: 'Success',\n        message: 'Countdown completed!',\n        position: 'topCenter',\n      });\n      return;\n    }\n\n    updateTimerHTML(timeData);\n  }, 1000);\n}\n\n// flatpickr instance options\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const curTime = Date.now();\n    const selectedTime = selectedDates[0].getTime();\n\n    if (curTime < selectedTime) {\n      userSelectedDate = selectedTime;\n      startBtn.disabled = false;\n\n      const t = convertMs(selectedTime - curTime);\n      updateTimerHTML(t);\n    } else {\n      startBtn.disabled = true;\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topCenter',\n      });\n    }\n  },\n};\n\nconst fp = flatpickr('#datetime-picker', options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const d = Math.floor(ms / day);\n  // Remaining hours\n  const h = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const m = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const s = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { d, h, m, s };\n}\n\n// update span elements\nfunction updateTimerHTML({ d, h, m, s }) {\n  spanDays.textContent = String(d).padStart(2, '0');\n  spanHours.textContent = String(h).padStart(2, '0');\n  spanMinutes.textContent = String(m).padStart(2, '0');\n  spanSeconds.textContent = String(s).padStart(2, '0');\n}\n"],"names":["input","startBtn","spanDays","spanHours","spanMinutes","spanSeconds","userSelectedDate","event","iziToast","startTimer","timer","now","timeData","convertMs","value","updateTimerHTML","options","selectedDates","curTime","selectedTime","t","flatpickr","ms","d","h","m","s"],"mappings":"2FAKA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,cAAc,EACtD,IAAIC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAc,SAAS,cAAc,sBAAsB,EAE3DC,EACJL,EAAS,SAAW,GAEpBA,EAAS,iBAAiB,QAASM,GAAS,CACtCD,GAAoB,CAACL,EAAS,WAChCD,EAAM,SAAW,GACjBC,EAAS,SAAW,GAEpBO,EAAS,KAAK,CACZ,MAAO,gBACP,QAAS,4BACT,SAAU,WAChB,CAAK,EAEDC,IAEJ,CAAC,EAGD,SAASA,GAAa,CACpB,MAAMC,EAAQ,YAAY,IAAM,CAC9B,MAAMC,EAAM,KAAK,MACXC,EAAWC,EAAUP,EAAmBK,CAAG,EAGjD,GADgB,OAAO,OAAOC,CAAQ,EAAE,MAAME,GAASA,IAAU,CAAC,EACrD,CACXC,EAAgBH,CAAQ,EACxB,cAAcF,CAAK,EACnBV,EAAM,SAAW,GACjBQ,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,uBACT,SAAU,WAClB,CAAO,EACD,MACD,CAEDO,EAAgBH,CAAQ,CACzB,EAAE,GAAI,CACT,CAGA,MAAMI,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAU,KAAK,MACfC,EAAeF,EAAc,CAAC,EAAE,QAAO,EAE7C,GAAIC,EAAUC,EAAc,CAC1Bb,EAAmBa,EACnBlB,EAAS,SAAW,GAEpB,MAAMmB,EAAIP,EAAUM,EAAeD,CAAO,EAC1CH,EAAgBK,CAAC,CACvB,MACMnB,EAAS,SAAW,GACpBO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WAClB,CAAO,CAEJ,CACH,EAEWa,EAAU,mBAAoBL,CAAO,EAEhD,SAASH,EAAUS,EAAI,CAQrB,MAAMC,EAAI,KAAK,MAAMD,EAAK,KAAG,EAEvBE,EAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEhCG,EAAI,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAE3CI,EAAI,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAE5D,MAAO,CAAE,EAAAC,EAAG,EAAAC,EAAG,EAAAC,EAAG,EAAAC,CAAC,CACrB,CAGA,SAASX,EAAgB,CAAE,EAAAQ,EAAG,EAAAC,EAAG,EAAAC,EAAG,EAAAC,CAAC,EAAI,CACvCxB,EAAS,YAAc,OAAOqB,CAAC,EAAE,SAAS,EAAG,GAAG,EAChDpB,EAAU,YAAc,OAAOqB,CAAC,EAAE,SAAS,EAAG,GAAG,EACjDpB,EAAY,YAAc,OAAOqB,CAAC,EAAE,SAAS,EAAG,GAAG,EACnDpB,EAAY,YAAc,OAAOqB,CAAC,EAAE,SAAS,EAAG,GAAG,CACrD"}